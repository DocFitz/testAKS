cluster:
  name: testcluster
  id: 1

# AKS BYO-CNI: let Cilium allocate Pod IPs from a cluster-pool.
ipam:
  mode: cluster-pool
  operator:
    clusterPoolIPv4PodCIDRList:
      - 10.244.0.0/16
    clusterPoolIPv4MaskSize: 24

# Required for bpf.masquerade (this is the specific crashloop you hit).
enableNodePort: true

#clean bpf state - restarts traffic connections and rebulds at kernel level from scratch
#cleanBpfState: true

#end goal is to have this set to true
bpf:
  masquerade: true

# You already discovered kernel constraints with BBR.
enableBBR: false

# Your chosen advanced options:
routingMode: native
ipv4NativeRoutingCIDR: 10.0.0.0/8

kubeProxyReplacement: true

hubble:
  enabled: true
  relay:
    enabled: true
  ui:
    enabled: true

gatewayAPI:
  enabled: true

bandwidthManager:
  enabled: false

